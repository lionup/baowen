
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   14.0   Copyright 1985-2015 StataCorp LP
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     MP - Parallel Edition            College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

7-user 8-core Stata network perpetual license:
       Serial number:  501406209299
         Licensed to:  Yale University
                       New Haven, CT

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  More than 2 billion observations are allowed; see help obs_advice.
      4.  Maximum number of variables is set to 5000; see help set_maxvar.

. do hpc.do 

. cd ~/git/baowen/hpc
/gpfs/home/fas/meghir/rg684/git/baowen/hpc

. set more 1

. cap log close

. log using log_hpc, text replace
-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /gpfs/home/fas/meghir/rg684/git/baowen/hpc/log_hpc.log
  log type:  text
 opened on:  29 Jun 2017, 16:51:22

. 
. use ../EWL_mergedfiles_imputed.dta, clear

. 
. gen ageenter=agexp

. mi stset age_exitB,enter(ageenter) failure(fail=1)

     failure event:  fail == 1
obs. time interval:  (0, age_exitB]
 enter on or after:  time ageenter
 exit on or before:  failure

------------------------------------------------------------------------------
       7740  total observations
          0  exclusions
------------------------------------------------------------------------------
       7740  observations remaining, representing
       5755  failures in single-record/single-failure data
  86014.207  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =     39.58
                                          last observed exit t =     81.02

. 
. *model 2
. 
. stcrreg lastftow agexp i.tedlev i.lastgrade i.lastdepress i.lastworksp i.last
> chronic if sex==1& drop1!=1&drop2!=1&drop3!=1&drop4!=1, compete(exit_typeL==2
> )

         failure _d:  fail == 1
   analysis time _t:  age_exitB
  enter on or after:  time ageenter

Iteration 0:   log pseudolikelihood = -342134.19  
Iteration 1:   log pseudolikelihood = -342103.25  
Iteration 2:   log pseudolikelihood = -342103.23  

Competing-risks regression                       No. of obs       =     47,008
                                                 No. of subjects  =     47,008
Failure event  : fail == 1                       No. failed       =     35,427
Competing event: exit_typeL == 2                 No. competing    =        510
                                                 No. censored     =     11,071

                                                 Wald chi2(11)    =    3423.52
Log pseudolikelihood = -342103.23                Prob > chi2      =     0.0000

------------------------------------------------------------------------------
             |               Robust
          _t |        SHR   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
    lastftow |   .9933343   .0035882    -1.85   0.064     .9863265    1.000392
       agexp |   1.020336   .0010786    19.04   0.000     1.018224    1.022452
             |
      tedlev |
A level o..  |   .9590137   .0136265    -2.95   0.003     .9326747    .9860964
Degree le..  |   .7797822   .0104315   -18.59   0.000     .7596025     .800498
             |
   lastgrade |
          2  |   1.213087   .0149201    15.71   0.000     1.184194    1.242685
          3  |   .9680903   .0213872    -1.47   0.142     .9270667    1.010929
             |
 lastdepress |
 1 yes, h..  |   1.162364   .0206709     8.46   0.000     1.122548    1.203593
             |
  lastworksp |
          1  |   .7165218   .0095301   -25.06   0.000     .6980846     .735446
          2  |   .7187265   .0112589   -21.08   0.000     .6969947    .7411359
             |
 lastchronic |
          1  |   .6739237   .0091865   -28.95   0.000     .6561568    .6921717
          2  |   .3579163   .0217252   -16.93   0.000      .317771    .4031333
------------------------------------------------------------------------------

. stcrreg lastftow agexp i.tedlev i.lastgrade i.lastdepress i.lastworksp i.last
> chronic if sex==2& drop1!=1&drop2!=1&drop3!=1&drop4!=1, compete(exit_typeL==2
> )

         failure _d:  fail == 1
   analysis time _t:  age_exitB
  enter on or after:  time ageenter

Iteration 0:   log pseudolikelihood = -174446.55  
Iteration 1:   log pseudolikelihood = -174434.72  
Iteration 2:   log pseudolikelihood = -174434.72  

Competing-risks regression                       No. of obs       =     24,636
                                                 No. of subjects  =     24,636
Failure event  : fail == 1                       No. failed       =     19,620
Competing event: exit_typeL == 2                 No. competing    =        186
                                                 No. censored     =      4,830

                                                 Wald chi2(11)    =    1589.23
Log pseudolikelihood = -174434.72                Prob > chi2      =     0.0000

------------------------------------------------------------------------------
             |               Robust
          _t |        SHR   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
    lastftow |    1.00977   .0046009     2.13   0.033     1.000793    1.018828
       agexp |   1.018747   .0015278    12.38   0.000     1.015757    1.021745
             |
      tedlev |
A level o..  |    1.04559     .02003     2.33   0.020     1.007059    1.085594
Degree le..  |   .8901345   .0182461    -5.68   0.000     .8550816    .9266243
             |
   lastgrade |
          2  |    1.28663   .0277547    11.68   0.000     1.233366    1.342194
          3  |    1.18533   .0277769     7.26   0.000     1.132119    1.241041
             |
 lastdepress |
 1 yes, h..  |   1.160863   .0234945     7.37   0.000     1.115716    1.207837
             |
  lastworksp |
          1  |   .7982562   .0115854   -15.53   0.000     .7758691    .8212892
          2  |   .8581686   .0289763    -4.53   0.000     .8032145    .9168825
             |
 lastchronic |
          1  |   .6480488   .0142384   -19.74   0.000     .6207345    .6765651
          2  |   .4175227   .0217639   -16.76   0.000     .3769729    .4624343
------------------------------------------------------------------------------

. stcrreg lastwtof agexp i.tedlev i.lastgrade i.lastdepress i.lastworksp i.last
> chronic if sex==1& drop1!=1&drop2!=1&drop3!=1&drop4!=1, compete(exit_typeL==2
> )

         failure _d:  fail == 1
   analysis time _t:  age_exitB
  enter on or after:  time ageenter

Iteration 0:   log pseudolikelihood = -341744.21  
Iteration 1:   log pseudolikelihood = -341711.77  
Iteration 2:   log pseudolikelihood = -341711.75  

Competing-risks regression                       No. of obs       =     46,966
                                                 No. of subjects  =     46,966
Failure event  : fail == 1                       No. failed       =     35,397
Competing event: exit_typeL == 2                 No. competing    =        508
                                                 No. censored     =     11,061

                                                 Wald chi2(11)    =    3567.88
Log pseudolikelihood = -341711.75                Prob > chi2      =     0.0000

------------------------------------------------------------------------------
             |               Robust
          _t |        SHR   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
    lastwtof |   1.041067    .003231    12.97   0.000     1.034753    1.047419
       agexp |   1.021383   .0010817    19.98   0.000     1.019265    1.023505
             |
      tedlev |
A level o..  |   .9517524   .0135339    -3.48   0.001     .9255927    .9786514
Degree le..  |   .7669763   .0102187   -19.91   0.000     .7472072    .7872683
             |
   lastgrade |
          2  |   1.254962   .0158997    17.93   0.000     1.224183    1.286515
          3  |   1.026561   .0235485     1.14   0.253     .9814295    1.073769
             |
 lastdepress |
 1 yes, h..  |   1.137857   .0201685     7.29   0.000     1.099007    1.178081
             |
  lastworksp |
          1  |   .7046879   .0094234   -26.17   0.000     .6864584    .7234015
          2  |   .7043949   .0110631   -22.31   0.000     .6830419    .7264154
             |
 lastchronic |
          1  |   .6744791   .0092647   -28.67   0.000      .656563    .6928841
          2  |   .3408292   .0209577   -17.50   0.000     .3021315    .3844833
------------------------------------------------------------------------------

. stcrreg lastwtof agexp i.tedlev i.lastgrade i.lastdepress i.lastworksp i.last
> chronic if sex==2& drop1!=1&drop2!=1&drop3!=1&drop4!=1, compete(exit_typeL==2
> )

         failure _d:  fail == 1
   analysis time _t:  age_exitB
  enter on or after:  time ageenter

Iteration 0:   log pseudolikelihood = -173676.06  
Iteration 1:   log pseudolikelihood = -173664.45  
Iteration 2:   log pseudolikelihood = -173664.45  

Competing-risks regression                       No. of obs       =     24,556
                                                 No. of subjects  =     24,556
Failure event  : fail == 1                       No. failed       =     19,549
Competing event: exit_typeL == 2                 No. competing    =        185
                                                 No. censored     =      4,822

                                                 Wald chi2(11)    =    1770.26
Log pseudolikelihood = -173664.45                Prob > chi2      =     0.0000

------------------------------------------------------------------------------
             |               Robust
          _t |        SHR   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
    lastwtof |   1.062787   .0047362    13.66   0.000     1.053545    1.072111
       agexp |   1.020417   .0015397    13.40   0.000     1.017404    1.023439
             |
      tedlev |
A level o..  |   1.049613   .0199695     2.55   0.011     1.011194    1.089492
Degree le..  |   .8763766   .0181567    -6.37   0.000     .8415029    .9126956
             |
   lastgrade |
          2  |   1.349695   .0294116    13.76   0.000     1.293263    1.408589
          3  |   1.276816   .0307513    10.15   0.000     1.217945    1.338532
             |
 lastdepress |
 1 yes, h..  |   1.124704   .0226551     5.83   0.000     1.081166    1.169995
             |
  lastworksp |
          1  |    .786783   .0114639   -16.46   0.000      .764632    .8095756
          2  |   .8357596   .0284285    -5.27   0.000     .7818576    .8933777
             |
 lastchronic |
          1  |   .6630157   .0144454   -18.86   0.000     .6352992    .6919413
          2  |   .4077044   .0218773   -16.72   0.000     .3670034    .4529192
------------------------------------------------------------------------------

. 
. /*
> *model 3
> 
> stcrreg lastftow agexp i.tedlev i.lastgrade i.lastdepress i.lastworksp i.last
> chronic i.lastjobdemt i.lastdeclatt i.lastjobsupp if sex==1& drop1!=1&drop2!=
> 1&drop3!=1&drop4!=1, compete(exit_typeL==2)
> stcrreg lastftow agexp i.tedlev i.lastgrade i.lastdepress i.lastworksp i.last
> chronic i.lastjobdemt i.lastdeclatt i.lastjobsupp  if sex==2& drop1!=1&drop2!
> =1&drop3!=1&drop4!=1, compete(exit_typeL==2)
> stcrreg lastwtof agexp i.tedlev i.lastgrade i.lastdepress i.lastworksp i.last
> chronic i.lastjobdemt i.lastdeclatt i.lastjobsupp  if sex==1& drop1!=1&drop2!
> =1&drop3!=1&drop4!=1, compete(exit_typeL==2)
> stcrreg lastwtof agexp i.tedlev i.lastgrade i.lastdepress i.lastworksp i.last
> chronic i.lastjobdemt i.lastdeclatt i.lastjobsupp  if sex==2& drop1!=1&drop2!
> =1&drop3!=1&drop4!=1, compete(exit_typeL==2)
> 
> 
> 
> *model 5
> 
> stcrreg lastftow agexp i.tedlev i.lastgrade i.lastdepress i.lastworksp i.last
> chronic i.lastnchild i.lastconthm i.lastcarer i.lastjobdemt i.lastdeclatt i.l
> astjobsupp if sex==1& drop1!=1&drop2!=1&drop3!=1&drop4!=1, compete(exit_typeL
> ==2)
> stcrreg lastftow agexp i.tedlev i.lastgrade i.lastdepress i.lastworksp i.last
> chronic i.lastnchild i.lastconthm i.lastcarer i.lastjobdemt i.lastdeclatt i.l
> astjobsupp if sex==2& drop1!=1&drop2!=1&drop3!=1&drop4!=1, compete(exit_typeL
> ==2)
> stcrreg lastwtof agexp i.tedlev i.lastgrade i.lastdepress i.lastworksp i.last
> chronic i.lastnchild i.lastconthm i.lastcarer i.lastjobdemt i.lastdeclatt i.l
> astjobsupp if sex==1& drop1!=1&drop2!=1&drop3!=1&drop4!=1, compete(exit_typeL
> ==2)
> stcrreg lastwtof agexp i.tedlev i.lastgrade i.lastdepress i.lastworksp i.last
> chronic i.lastnchild i.lastconthm i.lastcarer i.lastjobdemt i.lastdeclatt i.l
> astjobsupp if sex==2& drop1!=1&drop2!=1&drop3!=1&drop4!=1, compete(exit_typeL
> ==2)
> */
. 
. 
. saveold newresult, replace
(saving in Stata 13 format)
(FYI, saveold has options version(12) and version(11) that write files in
      older Stata formats)
file newresult.dta saved

. log close
      name:  <unnamed>
       log:  /gpfs/home/fas/meghir/rg684/git/baowen/hpc/log_hpc.log
  log type:  text
 closed on:  29 Jun 2017, 17:31:56
-------------------------------------------------------------------------------

. 
end of do-file
